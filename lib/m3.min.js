!function(){"use strict";"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}()}();var M3CreateClass=M3CreateClass||function(){"use strict";return function(a,b){var c=function(){a.call(this),null!==b&&void 0!==b&&b.call(this)};return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.__super__=a,c}}(),M3Exted=M3Exted||function(){"use strict";return function(){var a=function(a){var b;if(!a||"object"!==jQuery.type(a)||a.nodeType||jQuery.isWindow(a))return!1;try{if(a.constructor&&!hasOwn.call(a,"constructor")&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(support.ownLast)for(b in a)return hasOwn.call(a,b);return void 0===b||hasOwn.call(a,b)},b={};if(null!==arguments&&arguments.length>0)for(var c=0;c<arguments.length;c++){var d;if(void 0!==arguments[c]&&null!==arguments[c])for(d in arguments[c])b[d]=a(arguments[c][d])===!0&&void 0!==b[d]?M3Exted(b[d],arguments[c][d]):arguments[c][d]}return b}}(),M3Mixin=M3Mixin||function(){"use strict";return function(){var a={};if(null!==arguments&&arguments.length>0)for(var b=0;b<arguments.length;b++){var c;if(void 0!==arguments[b]&&null!==arguments[b])for(c in arguments[b])void 0===a[c]?a[c]=arguments[b][c]:"object"==typeof arguments[b][c]&&(a[c]=M3Mixin(a[c],arguments[b][c]))}return a}}(),M3=M3||new(M3CreateClass(Object,function(){"use strict";this.version="0.0.0",this.createClass=M3CreateClass,this.extend=M3Exted,this.mixin=M3Mixin,this.Axis={},this.Series={}}));!function(){"use strict";M3.utils=M3.Utils||{getMaxValue:function(a){return null!==a.data?d3.max(a.data,function(b){return b[a.config.itemValue]}):0/0},getMinValue:function(a){return null!==a.data?d3.min(a.data,function(b){return b[a.config.itemValue]}):0/0}}}(),function(){"use strict";M3.DataViz=M3.DataViz||M3CreateClass(Object),M3.DataViz.prototype.config=null,M3.DataViz.prototype.data=null,M3.DataViz.prototype.behaviours=null,M3.DataViz.prototype.setConfig=function(a){var b={margin:{top:5,bottom:5,left:5,right:5,all:0/0},width:200,height:100,container:"#chartContainer",styles:{container:"m3",canvas:"canvas"}},c=M3.extend(b,a);if(void 0!==a&&null!==a&&void 0!==a.margin&&null!==a.margin){var d=+a.margin.all;isNaN(d)||"number"!=typeof d||(c.margin.top=c.margin.bottom=c.margin.left=c.margin.right=a.margin.all)}return c.canvasWidth=c.width-(c.margin.left+c.margin.right),c.canvasHeight=c.height-(c.margin.top+c.margin.bottom),this.config=c,this},M3.DataViz.prototype.setData=function(a){return this.data=a,this},M3.DataViz.prototype.draw=function(a,b){if(void 0!==b&&this.setConfig(b),void 0!==a&&this.setData(a),this.beforeDraw(),this.drawContainer().drawCanvas(),this.drawInner(),this.afterDraw(),null!==this.behaviours)for(var c=0;c<this.behaviours.length;c++)void 0!==this.behaviours[c]&&null!==this.behaviours[c]&&this.behaviours[c].run(this);return this},M3.DataViz.prototype.drawInner=function(){return this},M3.DataViz.prototype.drawContainer=function(){var a=d3.select(this.config.container).append("svg").attr("class",this.config.styles.container).attr("width",this.config.width).attr("height",this.config.height);return a.append("rect").attr("width",this.config.width).attr("height",this.config.height).attr("class","background"),this},M3.DataViz.prototype.drawCanvas=function(){var a=d3.select(this.config.container+" ."+this.config.styles.container).append("g").attr("class",this.config.styles.canvas).attr("transform","translate("+this.config.margin.top+", "+this.config.margin.left+")").attr("width",this.config.canvasWidth).attr("height",this.config.canvasHeight);return a.append("rect").attr("width",this.config.canvasWidth).attr("height",this.config.canvasHeight).attr("class","background"),this},M3.DataViz.prototype.beforeDraw=function(){},M3.DataViz.prototype.afterDraw=function(){}}(),function(){"use strict";M3.AbstractChart=M3.AbstractChart||M3CreateClass(M3.DataViz),M3.AbstractChart.prototype.setConfig=function(a){var b=function(a){return a},c=function(a){return d3.format("s")(a)},d={itemValue:"value",itemLabel:"label",labelFormat:b,valueFormat:c},e=M3.mixin(a,d);return M3.DataViz.prototype.setConfig.call(this,e),this}}(),function(){"use strict";M3.Axis={},M3.Axis.AxisItem=function(){this._config=null,this._data=null,this.scale=null,this.axis=null,this.axisSVG=null,this._canvas=null,this._h=0,this._w=0},M3.Axis.AxisItem.prototype.canvas=function(a){return this._canvas=a,this},M3.Axis.AxisItem.prototype.defaultConfig=function(a){return M3.extend({},{},a)},M3.Axis.AxisItem.prototype.config=function(a){return this._config=this.defaultConfig(a),this},M3.Axis.AxisItem.prototype.data=function(a){return this._data=a,this},M3.Axis.AxisItem.prototype.getAxisScale=function(a){var b=this;this.scale=d3.scale.linear().range(a);var c=d3.max(b._data,function(a){return+a[b._config.serie]});return this.scale.domain([0,c]),this.scale},M3.Axis.AxisItem.prototype.getScale=function(){var a=null;return a="y"==this._config.axis?[this._h,0]:[0,this._w],this.scale=this.getAxisScale(a),this.scale},M3.Axis.AxisItem.prototype.getAxis=function(){var a=this;return this.axis=d3.svg.axis().scale(a.getScale()).orient(this._config.pos),null!==this._config.tickFormat&&this.axis.tickFormat(this._config.tickFormat),isNaN(this._config.tickSize)||this.axis.innerTickSize(this._config.tickSize),isNaN(this._config.tickPadding)||this.axis.tickPadding(this._config.tickPadding),this.axis},M3.Axis.AxisItem.prototype.addRect=function(a,b,c){return a.insert("rect","g").attr("class","background").attr("width",b).attr("height",c).attr("transform","translate("+("y"==this._config.axis&&"left"==this._config.pos?-1*b:0)+", 0)")},M3.Axis.AxisItem.prototype.addLabel=function(a){if("none"!=this._config.labelPosition){var b,c,d,e=this._config.label,f=a.append("text"),g="";f.text(e),"outer"==this._config.labelPosition?("y"==this._config.axis?(b="left"==this._config.pos?-1*this._config.width:this._config.width,c=a.select("rect").attr("height")/-2,g="rotate(-90)",d="left"===this._config.pos?"-0.5em":"1em"):(c=a.select("rect").attr("width")/2,b="bottom"==this._config.pos?this._config.width:-1*this._config.width,d="bottom"==this._config.pos?"1em":"-0.5em"),f.attr("y",b).attr("x",c).attr("transform",g).attr("dy",d).style("text-anchor","middle").attr("class","label")):("y"==this._config.axis&&(d="left"==this._config.pos?"0.5em":"-1em",b=6,g="rotate(-90)"),f.attr("transform",g).attr("y",b).attr("dy",d).attr("x",c).style("text-anchor","end"))}},M3.Axis.AxisItem.prototype.draw=function(a,b,c,d){return this._w=a,this._h=b,this.getAxis(),this._config.show&&(this.axisSVG=this._canvas.append("g").attr("class",this._config.axis+" axis "+this._config.axis+this._config.pos).attr("transform","translate("+c+", "+d+")").call(this.axis),this.addRect(this.axisSVG,a,b),this.addLabel(this.axisSVG)),this}}(),function(){"use strict";M3.Axis.CategoryAxis=M3.Axis.CategoryAxis||M3.createClass(M3.Axis.AxisItem,function(){this._config=null,this._data=null,this.scale=null,this.axis=null,this.axisSVG=null,this._canvas=null,this._h=0,this._w=0}),M3.Axis.CategoryAxis.prototype.getAxisScale=function(a){var b=this;return this.scale=d3.scale.ordinal().rangeRoundBands(a,this._config.padding,this._config.outterPadding),this.scale.domain(this._data.map(function(a){return a[b._config.serie]})),this.scale},M3.Axis.CategoryAxis.prototype.draw=function(a,b,c,d){return M3.Axis.AxisItem.prototype.draw.call(this,a,b,c,d),this._config.show===!0&&("diagonal"==this._config.rotate?this.axisSVG.selectAll("text").attr("transform","rotate(-45)").attr("x",-9).attr("y",10).style("text-anchor","end").attr("dy","0"):"verticalInv"==this._config.rotate?this.axisSVG.selectAll("text").attr("transform","rotate(90)").attr("x",9).attr("y",3).style("text-anchor","start").attr("dy","0"):"vertical"==this._config.rotate&&this.axisSVG.selectAll("text").attr("transform","rotate(-90)").attr("x",-9).attr("y",2).style("text-anchor","end").attr("dy","0")),this},M3.Axis.CategoryAxis.prototype.defaultConfig=function(a){return M3.extend({},{padding:.1,outterPadding:0,rotate:"none"},a)}}(),function(){"use strict";M3.Axis.CategoryPointsAxis=M3.Axis.CategoryPointsAxis||M3.createClass(M3.Axis.CategoryAxis,function(){this._config=null,this._data=null,this.scale=null,this._canvas=null,this._h=0,this._w=0}),M3.Axis.CategoryPointsAxis.prototype.getAxisScale=function(a){var b=this;return this.scale=d3.scale.ordinal().rangePoints(a,this._config.padding),this.scale.domain(this._data.map(function(a){return a[b._config.serie]})),this.scale}}(),function(){"use strict";M3.Axis.LinealAxis=M3.Axis.LinealAxis||M3.createClass(M3.Axis.AxisItem,function(){this._config=null,this._data=null,this.scale=null,this._canvas=null,this._h=0,this._w=0}),M3.Axis.LinealAxis.prototype.getAxisScale=function(a){var b=this;return this.scale=d3.scale.linear().range(a),this.scale.domain([0,d3.max(b._data,function(a){if(b._config.serie instanceof Array){for(var c=0,d=0;d<b._config.serie.length;d++)c<+a[b._config.serie[d]]&&(c=a[b._config.serie[d]]);return c}return+a[b._config.serie]})]),this._config.useNiceValues===!0&&this.scale.nice(),this.scale},M3.Axis.LinealAxis.prototype.getAxis=function(){return M3.Axis.AxisItem.prototype.getAxis.call(this),isNaN(this._config.ticks)||this.axis.ticks(this._config.ticks),this.axis},M3.Axis.LinealAxis.prototype.defaultConfig=function(a){return M3.extend({},{useNiceValues:!0,ticks:10},a)}}(),function(){"use strict";M3.Axis.Stacked100Axis=M3.Axis.Stacked100Axis||M3.createClass(M3.Axis.LinealAxis,function(){this._config=null,this._data=null,this.scale=null,this._canvas=null,this._h=0,this._w=0}),M3.Axis.Stacked100Axis.prototype.getAxisScale=function(a){return this.scale=d3.scale.linear().range(a),this.scale.domain([0,100]),this.scale}}(),function(){"use strict";M3.Axis.StackedAxis=M3.Axis.StackedAxis||M3.createClass(M3.Axis.LinealAxis,function(){this._config=null,this._data=null,this.scale=null,this._canvas=null,this._h=0,this._w=0}),M3.Axis.StackedAxis.prototype.getAxisScale=function(a){var b=this;return this.scale=d3.scale.linear().range(a),this.scale.domain([0,d3.max(b._data,function(a){for(var c=0,d=0;d<b._config.serie.length;d++)c+=+a[b._config.serie[d]];return c})]),this._config.useNiceValues===!0&&this.scale.nice(),this.scale}}(),function(){"use strict";M3.Axis.AxisManager=function(){this.config=null,this.data=null,this.axis={left:null,right:null,top:null,bottom:null}},M3.Axis.AxisManager.prototype.setConfig=function(a){return this.config=a,this},M3.Axis.AxisManager.prototype.setData=function(a){return this.data=a,this},M3.Axis.AxisManager.prototype.show=function(a,b){if(void 0!==a&&(this.data=a),void 0!==b&&(this.config=b),void 0!==this.data&&null!==this.data&&void 0!==this.config&&void 0!==this.config&&void 0!==this.config.axis&&null!==this.config.axis&&this.config.axis instanceof Array){for(var c=0;c<this.config.axis.length;c++)this.axis[this.config.axis[c].pos]={axis:null,conf:this.defaultConf(this.config.axis[c])};return null!==this.axis.left&&this.drawLeftAxis(this.axis.left),null!==this.axis.bottom&&this.drawBottomAxis(this.axis.bottom),null!==this.axis.right&&this.drawRightxis(this.axis.right),null!==this.axis.top&&this.drawTopAxis(this.axis.top),this}},M3.Axis.AxisManager.prototype.drawRightxis=function(a){for(var b=this.config.canvasWidth-this.getOffset("right"),c=this.getOffset("top"),d=a.conf.width,e=this.config.canvasHeight-this.getOffset("top")-this.getOffset("bottom"),f=d3.select(this.config.container+" .canvas"),g=M3,h=0,i=a.conf.clazz.split(".");h<i.length;)g=g[i[h++]];a.axis=(new g).canvas(f).config(a.conf).data(this.data).draw(d,e,b,c)},M3.Axis.AxisManager.prototype.drawLeftAxis=function(a){for(var b=a.conf.width+("outer"==a.conf.labelPosition&&""!==a.conf.label?a.conf.labelWidth:0),c=this.getOffset("top"),d=a.conf.width,e=this.config.canvasHeight-this.getOffset("top")-this.getOffset("bottom"),f=d3.select(this.config.container+" .canvas"),g=M3,h=0,i=a.conf.clazz.split(".");h<i.length;)g=g[i[h++]];a.axis=(new g).canvas(f).config(a.conf).data(this.data).draw(d,e,b,c)},M3.Axis.AxisManager.prototype.drawBottomAxis=function(a){for(var b=this.getOffset("left"),c=this.config.canvasHeight-this.getOffset("bottom"),d=this.config.canvasWidth-this.getOffset("left")-this.getOffset("right"),e=a.conf.width,f=d3.select(this.config.container+" .canvas"),g=M3,h=0,i=a.conf.clazz.split(".");h<i.length;)g=g[i[h++]];a.axis=(new g).canvas(f).config(a.conf).data(this.data).draw(d,e,b,c)},M3.Axis.AxisManager.prototype.drawTopAxis=function(a){for(var b=this.getOffset("left"),c=a.conf.width+("outer"==a.conf.labelPosition&&""!==a.conf.label?a.conf.labelWidth:0),d=this.config.canvasWidth-this.getOffset("left")-this.getOffset("right"),e=a.conf.width,f=d3.select(this.config.container+" .canvas"),g=M3,h=0,i=a.conf.clazz.split(".");h<i.length;)g=g[i[h++]];a.axis=(new g).canvas(f).config(a.conf).data(this.data).draw(d,e,b,c)},M3.Axis.AxisManager.prototype.getOffset=function(a){var b=0;return null!==this.axis[a]&&this.axis[a].conf.show===!0&&(b+=this.axis[a].conf.width,b+="outer"==this.axis[a].conf.labelPosition&&""!==this.axis[a].conf.label?this.axis[a].conf.labelWidth:0),b},M3.Axis.AxisManager.prototype.defaultConf=function(a){var b={};return b.id="",b.pos="left",b.label="",b.labelPosition="outer",b.serie=this.config.itemValue,b.width=35,b.show=!0,b.labelWidth=18,b.clazz="Axis.LinealAxis",b.tickSize=0/0,b.tickPadding=0/0,b=M3.extend({},b,a),"left"==b.pos||"right"==b.pos?(b.axis="y",b.width=void 0===b.width||null===b.width||isNaN(b.width)?35:b.width):(b.axis="x",b.width=void 0===a.width||null===a.width||isNaN(a.width)?20:b.width,b.serie=void 0===a.serie||null===a.serie?void 0!==this.config.itemLabel&&null!==this.config.itemLabel?this.config.itemLabel:"label":b.serie),b.labelWidth=void 0===b.labelWidth||null===b.labelWidth||isNaN(b.labelWidth)?18:b.labelWidth,b.tickFormat="y"==b.axis?void 0===a.tickFormat||null===a.tickFormat?void 0===this.config.valueFormat||null===this.config.valueFormat?function(a){return d3.format("s")(a)}:this.config.valueFormat:b.tickFormat:void 0===a.tickFormat||null===a.tickFormat?void 0===this.config.labelFormat||null===this.config.labelFormat?function(a){return a}:this.config.labelFormat:b.tickFormat,b}}(),function(){"use strict";M3.Series=M3.series||{},M3.Series.ChartSerie=function(){},M3.Series.ChartSerie.prototype.draw=function(a,b,c,d,e){return console&&(console.log(a),console.log(b),console.log(c),console.log(d),console.log(e)),e},M3.Series.ChartSerie.prototype.defaultConfig=function(a){return M3.extend({},{y:"left",x:"bottom",itemValue:"value",itemLabel:"label"},a)}}(),function(){"use strict";M3.Series.ColumnSerie=M3.Series.ColumnSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.ColumnSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=d.select("rect").attr("height"),h=d.selectAll(".column").data(a).enter().append("g").attr("class","rect"),i=c.axis[f.y].axis.scale,j=c.axis[f.x].axis.scale;return h.append("rect").attr("class","column serie s"+e).attr("x",function(a){return j(a[f.itemLabel])}).attr("y",function(a){return i(a[f.itemValue])}).attr("height",function(a){return void 0!==f.itemValueMin&&void 0!==a[f.itemValueMin]&&null!==a[f.itemValueMin]?g-i(a[f.itemValue]-a[f.itemValueMin]):g-i(a[f.itemValue])}).attr("width",j.rangeBand()),e++,e},M3.Series.ColumnSerie.prototype.defaultConfig=function(a){return M3.extend({},{itemValueMin:"valueMin"},M3.Series.ChartSerie.prototype.defaultConfig.call(this,a))}}(),function(){"use strict";M3.Series.GroupColumnSerie=M3.Series.GroupColumnSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.GroupColumnSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=d.select("rect").attr("height"),h=c.axis[f.y].axis.scale,i=c.axis[f.x].axis.scale,j=d3.scale.ordinal();j.domain(f.itemValue).rangeRoundBands([0,i.rangeBand()]);var k=d.selectAll(".group").data(a).enter().append("g").attr("class","group").attr("transform",function(a){return"translate("+i(a[f.itemLabel])+",0)"});d.selectAll(".group").append("rect").attr("width",i.rangeBand()).attr("height",g).attr("class","background"),k=d.selectAll(".group").append("g").attr("class","series");var l=f.itemValue;return k.selectAll("rect").data(function(a){for(var b=[],c=0;c<l.length;c++)b[c]={label:l[c],value:a[l[c]]};return b}).enter().append("rect").attr("width",j.rangeBand()).attr("x",function(a){return j(a.label)}).attr("y",function(a){return h(a.value)}).attr("height",function(a){return g-h(a.value)}).attr("class",function(a){var b=l.indexOf(a.label);return b+=b>=0?1:0,b=b>10?b/10:b,"column serie s"+b}),e+l.length}}(),function(){"use strict";M3.Series.StackedColumnSerie=M3.Series.StackedColumnSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.StackedColumnSerie.prototype.defaultConfig=function(a){return M3.extend({},{fullStack:!1,normalize:!0},M3.Series.ChartSerie.prototype.defaultConfig.call(this,a))},M3.Series.StackedColumnSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=d.select("rect").attr("height"),h=c.axis[f.y].axis.scale,i=c.axis[f.x].axis.scale,j=f.itemValue,k=d3.layout.stack().values(function(a){for(var b=[],c=0;c<j.length;c++)b[c]={label:j[c],value:a[j[c]]};return b}),l=k(a);if(void 0!==f.fullStack&&f.fullStack===!0&&void 0!==f.normalize&&f.normalize===!0){var m=a.map(function(a){for(var b=0,c=0;c<j.length;c++)b+=+a[j[c]];return b});l=l.map(function(a,b){var c={};return c[f.itemLabel]=a[f.itemLabel],j.forEach(function(d){c[d]=0===a[d]?0:100*+a[d]/m[b]}),c})}var n=d.selectAll(".group").data(l).enter().append("g").attr("class","group").attr("transform",function(a){return"translate("+i(a.label)+",0)"});return d.selectAll(".group").append("rect").attr("width",i.rangeBand()).attr("height",g).attr("class","background"),n=d.selectAll(".group").append("g").attr("class","series"),n.selectAll(".group").data(function(a){for(var b=[],c=0;c<j.length;c++){for(var d=0,e=0;c>e;e++)d+=+a[j[e]];b[c]={label:j[c],value:+a[j[c]],valueMin:0===c?0:d}}return b}).enter().append("rect").attr("x",function(a){return i(a.label)}).attr("y",function(a){return h(a.value+a.valueMin)}).attr("width",i.rangeBand()).attr("height",function(a){return g-h(a.value)}).attr("class",function(a){var b=j.indexOf(a.label);return b+=b>=0?1:0,b=b>10?b/10:b,"column serie s"+b}),e+j.length}}(),function(){"use strict";M3.Series.LineSerie=M3.Series.LineSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.LineSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=c.axis[f.y].axis.scale,h=c.axis[f.x].axis.scale,i=c.axis[f.x].conf.clazz.indexOf("CategoryAxis")>-1?!0:!1,j=d3.svg.line().x(function(a){return h(a[f.itemLabel])+(i?h.rangeBand()/2:0)}).y(function(a){return g(a[f.itemValue])});d.append("path").datum(a).attr("class","sl"+e).attr("d",j);var k=d.selectAll(".data-point-s"+e).data(a).enter().append("g").attr("class","serie data-point-s"+e).attr("transform",function(a){return"translate("+(h(a[f.itemLabel])+(i?h.rangeBand()/2:0))+","+g(a[f.itemValue])+")"});return k.append("circle").attr("r",function(){return 3}),e++,e}}(),function(){"use strict";M3.Series.AreaSerie=M3.Series.AreaSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.AreaSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=d.select("rect").attr("height"),h=c.axis[f.y].axis.scale,i=c.axis[f.x].axis.scale,j=d3.svg.area().x(function(a){return i(a[f.itemLabel])}).y0(function(a){return void 0!==a[f.itemValueMin]&&null!==a[f.itemValueMin]?h(a[f.itemValueMin]):g}).y1(function(a){return h(a[f.itemValue])});d.append("path").datum(a).attr("class","s1").attr("d",j),e++},M3.Series.AreaSerie.prototype.defaultConfig=function(a){return M3.extend({},{itemValueMin:"valueMin"},M3.Series.ChartSerie.prototype.defaultConfig.call(this,a))}}(),function(){"use strict";M3.Series.StackedAreaSerie=M3.Series.StackedAreaSerie||M3.createClass(M3.Series.ChartSerie,function(){}),M3.Series.StackedAreaSerie.prototype.defaultConfig=function(a){return M3.extend({},{fullStack:!1,normalize:!0},M3.Series.ChartSerie.prototype.defaultConfig.call(this,a))},M3.Series.StackedAreaSerie.prototype.draw=function(a,b,c,d,e){var f=this.defaultConfig(b),g=d.select("rect").attr("height"),h=c.axis[f.y].axis.scale,i=c.axis[f.x].axis.scale,j=f.itemValue,k=a;if(void 0!==f.fullStack&&f.fullStack===!0&&void 0!==f.normalize&&f.normalize===!0){var l=a.map(function(a){for(var b=0,c=0;c<j.length;c++)b+=+a[j[c]];return b});k=k.map(function(a,b){var c={};return c[f.itemLabel]=a[f.itemLabel],j.forEach(function(d){c[d]=0===a[d]?0:100*+a[d]/l[b]}),c})}return j.map(function(b,c){var l=d3.svg.area().x(function(a){return i(a[f.itemLabel])}).y0(function(a){if(0===c)return g;for(var b=0,d=0;c>d;d++)b+=+a[j[d]];return h(b)}).y1(function(a){if(0===c)return h(+a[b]);for(var d=0,e=0;c>e;e++)d+=+a[j[e]];return d+=+a[b],h(d)});d.append("path").datum(k).attr("class",function(){var a=c+1;return a=c>10?c/10:a,"s"+a}).attr("d",l);var m=d.selectAll(".data-point"+e).data(a).enter().append("g").attr("class",function(){var a=c+1;return a=c>10?c/10:a,"data-point-s"+a}).attr("transform",function(a){return"translate("+i(a[f.itemLabel])+","+h(a[b])+")"});(void 0!==f.itemValueMin&&void 0===a[0][f.itemValueMin]||null===a[0][f.itemValueMin])&&m.append("circle").attr("r",function(){return 3})}),e+j.length}}(),function(){"use strict";M3.Chart=M3.Chart||M3CreateClass(M3.AbstractChart,function(){this.axis=null,this.series=null}),M3.Chart.prototype.addAxis=function(){this.axis=new M3.Axis.AxisManager,this.axis.setConfig(this.config).setData(this.data).show()},M3.Chart.prototype.drawInner=function(){return this.addAxis(),this.drawChartArea(),this.drawSeries(),this},M3.Chart.prototype.drawSeries=function(){this.series=[];var a=d3.select(this.config.container+" .chartarea"),b=null;b=void 0===this.config.series||null===this.config.series?[this.configSerie({})]:this.config.series instanceof Array?this.config.series:[this.configSerie(this.config.series)];for(var c=1,d=0;d<b.length;d++){var e=this.configSerie(b[d]);if(void 0!==e&&null!==e&&void 0!==e.clazz&&null!==e.clazz){for(var f=e.clazz.split("."),g=M3,h=0;h<f.length;)g=g[f[h++]];c=this.series[d]=(new g).draw(this.data,e,this.axis,a,c)}}},M3.Chart.prototype.configSerie=function(a){return(void 0===a.itemValue||null===a.itemValue)&&(a.itemValue=this.config.itemValue),(void 0===a.itemValue||null===a.itemValue)&&(a.itemLabel=this.config.itemLabel),a},M3.Chart.prototype.drawChartArea=function(){var a=d3.select(this.config.container+" ."+this.config.styles.canvas),b=0;b+=null!==this.axis.axis.left?this.axis.getOffset("left")+1:0;var c=0;c+=null!==this.axis.axis.top?this.axis.getOffset("top"):0;var d=this.config.canvasWidth;d-=null!==this.axis.axis.left?this.axis.getOffset("left")+1:0,d-=null!==this.axis.axis.right?this.axis.getOffset("right")+1:0;var e=this.config.canvasHeight;return e-=null!==this.axis.axis.top?this.axis.getOffset("top"):0,e-=null!==this.axis.axis.bottom?this.axis.getOffset("bottom"):0,a.append("g").attr("class","chartarea").attr("transform","translate("+b+", "+c+")").append("rect").attr("width",d).attr("height",e).attr("class","background"),this}}(),function(){"use strict";M3.AbstractPolarChart=M3.AbstractPolarChart||M3.createClass(M3.AbstractChart),M3.AbstractPolarChart.prototype.arc=null,M3.AbstractPolarChart.prototype.slices=null,M3.AbstractPolarChart.prototype.getArc=function(){var a=this;return a.arc=d3.svg.arc().outerRadius(a.config.radius).innerRadius(0),a.arc},M3.AbstractPolarChart.prototype.getLayout=function(){var a=this;return a.layout=d3.layout.pie().sort(null).value(function(b){return b[a.config.itemValue]}),a.layout},M3.AbstractPolarChart.prototype.addSlices=function(){var a=this,b=null,c=d3.select(this.config.container+" ."+this.config.styles.canvas),d=c.append("g").attr("class","chartarea").attr("transform","translate("+a.config.canvasWidth/2+","+a.config.canvasHeight/2+")");d.append("rect").attr("width",this.config.canvasWidth).attr("height",this.config.canvasHeight).attr("class","background").attr("x",a.config.canvasWidth/-2).attr("y",a.config.canvasHeight/-2);var e=d.selectAll(".arc").data(a.layout(a.data)).enter().append("g").attr("class","arc");return e.append("path").attr("d",a.arc).attr("class",function(a,b){var c=+b+1;return"serie s"+(11>c?c.toString():(c%10).toString())}),null!==b&&slice.style("fill",function(c){return b(c.data[a.config.itemValue])}),this.slices=e,e},M3.AbstractPolarChart.prototype.beforeDraw=function(){M3.AbstractChart.prototype.beforeDraw.call(this),(void 0===this.config.radius||null===this.config.radius||isNaN(this.config.radius))&&(this.config.radius=Math.min(this.config.canvasWidth,this.config.canvasHeight)/2)}}(),function(){"use strict";M3.PieChart=M3.PieChart||M3.createClass(M3.AbstractPolarChart,function(){this.className="PieChart"}),M3.PieChart.prototype.drawInner=function(){this.getArc(),this.getLayout();var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas pieChart"),this.addSlices()}}(),function(){"use strict";M3.DonutChart=M3.DonutChart||M3.createClass(M3.PieChart,function(){this.className="DonutChart"}),M3.DonutChart.prototype.getArc=function(){var a=this;return a.arc=d3.svg.arc().outerRadius(a.config.radius).innerRadius(a.config.radius-a.config.donutWidth),a.arc},M3.DonutChart.prototype.setConfig=function(a){var b={donutWidth:20},c=M3.mixin(a,b);return M3.AbstractChart.prototype.setConfig.call(this,c),this},M3.DonutChart.prototype.drawInner=function(){M3.PieChart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas donutChart")}}(),function(){"use strict";M3.ArcChart=M3.ArcChart||M3.createClass(M3.DonutChart,function(){this.className="ArcChart"}),M3.ArcChart.prototype.drawInner=function(){var a=this,b=a.data[0][a.config.itemValue],c=2*Math.PI,d=this.config.startAngle/100*c,e=this.getArc().startAngle(d),f=d3.select(this.config.container+" ."+this.config.styles.canvas);f.attr("class","canvas arcChart");var g=f.append("g").attr("class","chartarea").attr("transform","translate("+a.config.canvasWidth/2+","+a.config.canvasHeight/2+")");g.append("rect").attr("width",this.config.canvasWidth).attr("height",this.config.canvasHeight).attr("class","background").attr("x",a.config.canvasWidth/-2).attr("y",a.config.canvasHeight/-2),g.append("path").datum({endAngle:c}).attr("class","brackground").attr("d",e),g.append("path").datum({endAngle:d+b/100*c}).attr("class","serie s1").attr("d",e)},M3.ArcChart.prototype.setConfig=function(a){var b={startAngle:0},c=M3.mixin(a,b);return M3.DonutChart.prototype.setConfig.call(this,c),this}}(),function(){"use strict";M3.SliceChart=M3.SliceChart||M3.createClass(M3.ArcChart,function(){this.className="SliceChart"}),M3.SliceChart.prototype.getArc=function(){var a=this;return a.arc=d3.svg.arc().outerRadius(a.config.radius),a.arc},M3.SliceChart.prototype.drawInner=function(){M3.ArcChart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas sliceChart")}}(),function(){"use strict";M3.KPIComplete=M3.KPIComplete||M3.createClass(M3.ArcChart),M3.KPIComplete.prototype.drawInner=function(){M3.ArcChart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas kpicompleteChart");var b=d3.select(this.config.container+" ."+this.config.styles.canvas+" .chartarea");b.attr("transform","translate("+this.config.radius+", "+this.config.radius+")");var c=d3.select(this.config.container+" ."+this.config.styles.canvas+" .chartarea rect");c.attr("x",this.config.radius/-1).attr("y",this.config.radius/-1);var d=+this.data[0].value,e=d>0?"acomplishment_ok":0>d?"acomplishment_bad":"acomplishment_zero";a.select(".s1").attr("class","serie "+e);var f="",g=b.append("text").attr("class","title").attr("dy","1em").attr("transform","translate("+(this.config.radius+10)+", "+-1*this.config.radius+")");null!==this.data&&(f=void 0!==this.config.titleItem&&""!==this.config.titleItem?this.config.titleItem:"title",void 0!==this.data[0][f]&&null!==this.data[0][f]&&g.text(this.data[0][f])),b.append("text").attr("dy",".35em").attr("class","txtKPI").attr("text-anchor","end").attr("transform","translate(8,0)").text(this.data[0].value.toString()),b.append("text").attr("dy",".35em").attr("class","txtKPI_porc").attr("text-anchor","start").attr("transform","translate(8,0)").text("%"),b.append("text").attr("class","obj_title").attr("dy","1em").text("Ojetivo:").attr("transform","translate("+(this.config.radius+10)+", 0)"),g=b.append("text").attr("class","obj_value").attr("dy","1em").attr("dx","4.4em").attr("transform","translate("+(this.config.radius+10)+", 0)"),null!==this.data&&(f=void 0!==this.config.targetItem?this.config.targetItem:"target",void 0!==this.data[0][f]&&null!==this.data[0][f]&&g.text(this.data[0][f])),b.append("text").attr("class","real_title").attr("dy","2.5em").attr("dx","1.2em").text("Real:").attr("transform","translate("+(this.config.radius+10)+", 0)"),g=b.append("text").attr("class","real_value").attr("dy","2.5em").attr("dx","4.4em").attr("transform","translate("+(this.config.radius+10)+", 0)"),null!==this.data&&(f=void 0!==this.config.realItem?this.config.realItem:"real",void 0!==this.data[0][f]&&null!==this.data[0][f]&&g.text(this.data[0][f]))}}(),function(){"use strict";M3.AreaChart=M3.AreaChart||M3CreateClass(M3.Chart,function(){this.axis=null,this.series=null}),M3.AreaChart.prototype.configSerie=function(a){var b=M3.LineChart.prototype.configSerie.call(this,{clazz:"Series.AreaSerie"});return M3.extend({},b,M3.Chart.prototype.configSerie.call(this,a))},M3.AreaChart.prototype.drawInner=function(){M3.Chart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas areaChart")}}(),function(){"use strict";M3.ColumnChart=M3.ColumnChart||M3CreateClass(M3.Chart,function(){this.axis=null,this.series=null}),M3.ColumnChart.prototype.configSerie=function(a){var b={clazz:"Series.ColumnSerie"};return M3.extend({},b,M3.Chart.prototype.configSerie.call(this,a))},M3.ColumnChart.prototype.drawInner=function(){M3.Chart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas columnChart")}}(),function(){"use strict";M3.LineChart=M3.LineChart||M3CreateClass(M3.Chart,function(){this.axis=null,this.series=null}),M3.LineChart.prototype.configSerie=function(a){var b={clazz:"Series.LineSerie"};return M3.extend({},b,M3.Chart.prototype.configSerie.call(this,a))},M3.LineChart.prototype.drawInner=function(){M3.Chart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas lineChart")}}(),function(){"use strict";M3.StackedAreaChart=M3.StackedAreaChart||M3CreateClass(M3.Chart,function(){this.axis=null,this.series=null}),M3.StackedAreaChart.prototype.configSerie=function(a){var b=M3.AreaChart.prototype.configSerie.call(this,{clazz:"Series.StackedAreaSerie"});return M3.extend({},b,M3.Chart.prototype.configSerie.call(this,a))},M3.StackedAreaChart.prototype.drawInner=function(){M3.Chart.prototype.drawInner.call(this);var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas stackedAreaChart")}}(),function(){"use strict";M3.StackedColumnChart=M3.StackedColumnChart||M3CreateClass(M3.Chart,function(){this.axis=null,this.series=null}),M3.StackedColumnChart.prototype.configSerie=function(a){var b=M3.ColumnChart.prototype.configSerie.call(this,{clazz:"Series.StackedColumnSerie"});return M3.extend({},b,M3.Chart.prototype.configSerie.call(this,a))},M3.StackedColumnChart.prototype.drawInner=function(){M3.Chart.prototype.drawInner.call(this);
var a=d3.select(this.config.container+" ."+this.config.styles.canvas);a.attr("class","canvas stackedColumnChart")}}(),function(){"use strict";M3.behaviours=M3.behaviours||{},M3.behaviours.SerieValue=function(){},M3.behaviours.SerieValue.prototype.run=function(a){var b=void 0!==a.axis&&null!==a.axis?a.axis.hasYLeft?a.axis.yleft.scale:a.axis.yright.scale:null,c=void 0!==a.axis&&null!==a.axis?a.axis.hasXBottom?a.axis.xbottom.scale:a.axis.xtop.scale:null;"ColumnChart"==a.className?d3.selectAll(a.config.container+" .chartarea g").append("text").attr("x",function(b){return c(b[a.config.itemLabel])+c.rangeBand()/2}).attr("y",function(c){return b(c[a.config.itemValue])}).attr("dy","1em").attr("class","serieLabel").attr("text-anchor","middle").text(function(b){return a.config.yLabelFormat(b[a.config.itemValue])}):"LineChart"==a.className||"AreaChart"==a.className?d3.selectAll(a.config.container+" .chartarea g").append("text").attr("dy",function(b){return M3.utils.getMaxValue(a)==b[a.config.itemValue]?"1.5em":"-0.6em"}).attr("class","serieLabel").attr("text-anchor",function(b,c){return 0===c?"start":c==a.data.length-1?"end":"middle"}).text(function(b){return a.config.yLabelFormat(b[a.config.itemValue])}):("PieChart"==a.className||"DonutChart"==a.className)&&(d3.selectAll(a.config.container+" .chartarea g").append("text").attr("transform",function(b){b.outerRadius=a.config.radius,b.innerRadius=a.config.radius;var c=a.arc.centroid(b);c[0]*=1.5,c[1]*=1.5;var d=a.config.radius;return"translate("+(d+14)*Math.sin((b.endAngle-b.startAngle)/2+b.startAngle)+","+-1*(d+14)*Math.cos((b.endAngle-b.startAngle)/2+b.startAngle)+")"}).attr("dy",".35em").attr("class","serieLabel_polar").attr("text-anchor","middle").attr("text-anchor",function(a){var b=(a.endAngle-a.startAngle)/2+a.startAngle;return b>7*Math.PI/4&&b<Math.PI/4||b>3*Math.PI/4&&b<5*Math.PI/4?"middle":b>=Math.PI/4&&b<=3*Math.PI/4?"start":b>=5*Math.PI/4&&b<=7*Math.PI/4?"end":"middle"}).text(function(b){return a.config.valueFormat(b[a.config.itemValue])}),d3.selectAll(a.config.container+" .chartarea g").append("line").attr("x1",function(b){var c=a.config.radius;return c*Math.sin((b.endAngle-b.startAngle)/2+b.startAngle)}).attr("x2",function(b){var c=a.config.radius;return(c+10)*Math.sin((b.endAngle-b.startAngle)/2+b.startAngle)}).attr("y1",function(b){var c=a.config.radius;return-1*c*Math.cos((b.endAngle-b.startAngle)/2+b.startAngle)}).attr("y2",function(b){var c=a.config.radius;return-1*(c+10)*Math.cos((b.endAngle-b.startAngle)/2+b.startAngle)}).attr("stroke","rgb(204, 204, 204)"))}}(),function(){"use strict";M3.behaviours=M3.behaviours||{},M3.behaviours.Legend=function(a){this.config=M3.extend({width:15,position:"bottom",nameItem:"name"},void 0!==a?a:{})},M3.behaviours.Legend.prototype.run=function(a){for(var b=d3.select(a.config.container+" svg .chartarea rect"),c=d3.select(a.config.container+" svg").append("g").attr("class","legend"),d=0,e=0,f=d3.scale.ordinal(),g=null,h=[],i=0;i<a.config.series.length;i++)g=a.config.series[i][this.config.nameItem],h=h.concat(g instanceof Array?g:[g]);for(f.domain(h),"bottom"==this.config.position?(d=(void 0!==a.axis?a.axis.getOffset("left"):0)+a.config.margin.left,e=a.config.height-this.config.width,f.rangeRoundBands([0,b.attr("width")])):"top right"==this.config.position&&(d=a.config.width-((void 0!==a.axis?a.axis.getOffset("right"):0)+a.config.margin.right+10),e=(void 0!==a.axis?a.axis.getOffset("top"):0)+a.config.margin.top,f.rangeRoundBands([0,this.config.width*h.length])),c.attr("transform","translate("+d+", "+e+")"),i=0;i<a.config.series.length;i++)if(g=a.config.series[i][this.config.nameItem],g instanceof Array)for(var j=0;j<g.length;j++){var k=c.append("g");this.config.position.indexOf("left")<0&&this.config.position.indexOf("right")<0?(k.attr("transform","translate("+f(g[j])+", 0)"),k.append("rect").attr("class","s"+(j+1)).attr("width",10).attr("height",10),k.append("text").attr("transform","translate(15, 0)").attr("dy","1em").attr("text-anchor","start").text(g[j])):(k.attr("transform","translate(0, "+f(g[j])+")"),k.append("rect").attr("class","s"+(j+1)).attr("width",10).attr("height",10),k.append("text").attr("transform","translate(-5, 0)").attr("dy","1em").attr("text-anchor","end").text(g[j]))}else{var l=c.append("g");l.attr("transform","translate("+f(g)+", 0)"),this.config.position.indexOf("left")<0&&this.config.position.indexOf("right")<0?(l.attr("transform","translate("+f(g)+", 0)"),l.append("rect").attr("class","s"+(i+1)).attr("width",10).attr("height",10),l.append("text").attr("transform","translate(15, 0)").attr("dy","1em").attr("text-anchor","start").text(g)):(l.attr("transform","translate(0, "+f(g)+")"),l.append("rect").attr("class","s"+(i+1)).attr("width",10).attr("height",10),l.append("text").attr("transform","translate(-5, 0)").attr("dy","1em").attr("text-anchor","end").text(g))}}}(),function(){"use strict";M3.behaviours=M3.behaviours||{},M3.behaviours.Tooltip=function(){this.tooltip=null,this.tooltipStick=null,this.lastClick=null},M3.behaviours.Tooltip.prototype.run=function(a){var b=this,c=d3.select(a.config.container+" .canvas");this.tooltipStick=d3.tip().attr("class","d3-tip").html(function(a){return a.label+": "+d3.format("s")(a.value)}).offset([-10,0]),c.call(this.tooltipStick),this.tooltip=d3.tip().attr("class","d3-tip").html(function(a){return a.label+": "+d3.format("s")(a.value)}).offset([-10,0]),c.call(this.tooltip),c.selectAll(".serie").on("mouseover",this.tooltip.show).on("mouseout",this.tooltip.hide).on("click",function(a){b.tooltipStick.hide(a),a!=b.lastClick?(b.tooltipStick.show(a),b.lastClick=a):b.lastClick=null})}}(),function(){"use strict";M3.behaviours=M3.behaviours||{},M3.behaviours.GridBackground=function(a){this.config=M3.extend({width:15,position:"bottom",nameItem:"name"},void 0!==a?a:{})},M3.behaviours.GridBackground.prototype.run=function(a){d3.select(a.config.container+" .chartarea").insert("g","g").attr("class","grid");var b=d3.select(a.config.container+" .chartarea rect").attr("width"),c=d3.select(a.config.container+" .chartarea rect").attr("height"),d=null,e=null;if(void 0!==a.config.axis&&a.config.axis instanceof Array)for(var f=a.config.axis,g=0;(null===d||null===e)&&g<f.length;){var h=f[g].pos;null!==d||"left"!=h&&"right"!=h?null!==e||"top"!=h&&"bottom"!=h||(e=a.axis.axis[h].axis.scale):d=a.axis.axis[h].axis.scale,g++}null!==d&&void 0!==d.ticks&&d3.select(a.config.container+" .chartarea g.grid").selectAll("line.y").data(d.ticks(5)).enter().append("line").attr("class","y").attr("x1",0).attr("x2",b).attr("y1",d).attr("y2",d).style("stroke","#DDD").style("stroke-dasharray","5,2"),null!==e&&void 0!==e.ticks&&d3.select(a.config.container+" .chartarea g.grid").selectAll("line.x").data(e.ticks()).enter().append("line").attr("class","x").attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",c).style("stroke","#ccc")}}();
//# sourceMappingURL=m3.min.map